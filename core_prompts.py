"""
Core Banking Notification Prompts
=================================

This file contains only the essential prompt definitions and helper functions
for generating banking push notifications. No Azure OpenAI integration.
"""

# =============================================================================
# HELPER FUNCTIONS FOR DYNAMIC INSTRUCTIONS
# =============================================================================

def get_age_instructions(age):
    """Get age-specific TOV instructions"""
    if age <= 25:
        return "- Для молодёжи: меньше официоза, чуть живее; без жаргона «в лоб»; можно лёгкий юмор и 1 эмодзи по смыслу"
    else:
        return "- Для взрослых: на равных, просто и по-человечески, доброжелательно; без драматизации и морали"

def get_status_instructions(status):
    """Get status-specific TOV instructions"""
    if status == "Студент":
        return "- Для студентов: на равных, просто и по-человечески; можно лёгкий юмор и разговорные выражения"
    elif status == "Премиальный клиент":
        return "- Для премиальных клиентов: на равных, уважительно, без официоза; подчеркнуть статус"
    else:
        return "- Стандартный тон: на равных, просто и по-человечески, доброжелательно"

# =============================================================================
# PROMPT 1: КАРТА ДЛЯ ПУТЕШЕСТВИЙ (TRAVEL CARD)
# =============================================================================

TRAVEL_CARD_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для карты путешествий.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- taxi_rides_count: {taxi_rides_count} (количество поездок на такси за месяц)
- taxi_spent_amount: {taxi_spent_amount} (потрачено на такси за месяц в KZT)
- travel_spent_amount: {travel_spent_amount} (потрачено на путешествия за месяц в KZT)
- hotels_spent_amount: {hotels_spent_amount} (потрачено на отели за месяц в KZT)
- month: {month} (месяц для персонализации)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы, без драматизации и морали
- На равных, просто и по-человечески; доброжелательно
- Важное — в начало, без воды/канцеляризмов/пассивного залога
- Допустим лёгкий, ненавязчивый юмор; эмодзи — 0-1 по смыслу
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Откройте карту", "Оформить карту", "Подключить карту"

СТРУКТУРА:
1. Персональный контекст (наблюдение по тратам)
2. Польза/объяснение (как карта решает задачу)
3. Чёткий CTA

ШАБЛОН: "{name}, в {month} у вас много поездок/такси. С тревел-картой часть расходов вернулась бы кешбэком. Хотите оформить?"

ПРИМЕРЫ:
- "Рамазан, в августе вы сделали 12 поездок на такси на 27 400 ₸. С картой для путешествий вернули бы ≈1 100 ₸. Откройте карту в приложении."
- "Алия, в сентябре у вас много поездок на такси и трат на отели. С тревел-картой часть расходов вернулась бы кешбэком. Хотите оформить? ✈️"
- "Данияр, вы часто путешествуете и пользуетесь такси. С картой для путешествий получили бы кешбэк с каждой поездки. Оформить карту."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Карта для путешествий", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 2: ПРЕМИАЛЬНАЯ КАРТА (PREMIUM CARD)
# =============================================================================

PREMIUM_CARD_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для премиальной карты.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- restaurants_spent: {restaurants_spent} (потрачено в ресторанах за месяц в KZT)
- cosmetics_spent: {cosmetics_spent} (потрачено на косметику за месяц в KZT)
- jewelry_spent: {jewelry_spent} (потрачено на ювелирку за месяц в KZT)
- atm_withdrawals_count: {atm_withdrawals_count} (количество снятий в банкомате)
- transfers_count: {transfers_count} (количество переводов)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Оформить сейчас", "Подключить карту", "Открыть карту"

СТРУКТУРА:
1. Персональный контекст (наблюдение по остатку и тратам)
2. Польза/объяснение (кешбэк и привилегии)
3. Чёткий CTA

ШАБЛОН: "{name}, у вас стабильно крупный остаток и траты в ресторанах. Премиальная карта даст повышенный кешбэк и бесплатные снятия. Оформить сейчас."

ПРИМЕРЫ:
- "Алия, у вас высокий остаток на счету это дает вам большие возможности. Премиальная карта даст до 4% кешбэка на все покупки и бесплатные снятия. Подключите сейчас."
- "Елена, у вас стабильно крупный остаток и активные траты в ресторанах. Премиальная карта даст повышенный кешбэк и бесплатные снятия. Оформить сейчас. 💎"
- "Руслан, с вашим высоким балансом и тратами на ювелирку вы заслуживаете больше. Премиальная карта предлагает до 5% кешбэка и эксклюзивные привилегии. Оформить сейчас."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Премиальная карта", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 3: КРЕДИТНАЯ КАРТА (CREDIT CARD)
# =============================================================================

CREDIT_CARD_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для кредитной карты.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- top_category_1: {top_category_1} (первая топ-категория трат)
- top_category_2: {top_category_2} (вторая топ-категория трат)
- top_category_3: {top_category_3} (третья топ-категория трат)
- online_services_spent: {online_services_spent} (потрачено на онлайн-сервисы в KZT)
- installment_payments: {installment_payments} (есть ли платежи по рассрочке)
- cc_repayments: {cc_repayments} (есть ли погашения кредитной карты)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Оформить карту", "Открыть карту", "Подключить карту"

СТРУКТУРА:
1. Персональный контекст (топ-категории трат)
2. Польза/объяснение (кешбэк в любимых категориях)
3. Чёткий CTA

ШАБЛОН: "{name}, ваши топ-категории — {top_category_1}, {top_category_2}, {top_category_3}. Кредитная карта даёт до 10% в любимых категориях и на онлайн-сервисы. Оформить карту."

ПРИМЕРЫ:
- "Алия, ваши топ-категории — Кафе и рестораны, Одежда и обувь, Развлечения. Кредитная карта даёт до 10% в любимых категориях и на онлайн-сервисы. Оформить карту."
- "Данияр, вы много тратите на Продукты питания, Такси и Кино. Кредитная карта даст до 10% кешбэка в этих категориях. Оформить карту. 💳"
- "Сабина, ваши основные траты — Одежда и обувь, Косметика, Развлечения. Кредитная карта даст повышенный кешбэк в любимых категориях. Оформить карту."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Кредитная карта", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 4: ОБМЕН ВАЛЮТ (CURRENCY EXCHANGE)
# =============================================================================

CURRENCY_EXCHANGE_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для обмена валют.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- fx_buy_count: {fx_buy_count} (количество покупок валюты)
- fx_sell_count: {fx_sell_count} (количество продаж валюты)
- usd_spent: {usd_spent} (потрачено в USD за месяц)
- eur_spent: {eur_spent} (потрачено в EUR за месяц)
- main_foreign_currency: {main_foreign_currency} (основная иностранная валюта)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Настроить обмен", "Открыть обмен", "Подключить обмен"

СТРУКТУРА:
1. Персональный контекст (активность с валютой)
2. Польза/объяснение (выгодный обмен)
3. Чёткий CTA

ШАБЛОН: "{name}, вы часто платите в {main_foreign_currency}. В приложении выгодный обмен и авто-покупка по целевому курсу. Настроить обмен."

ПРИМЕРЫ:
- "Алия, вы часто платите в USD. В приложении выгодный обмен и авто-покупка по целевому курсу. Настроить обмен."
- "Данияр, вы регулярно тратите в EUR на зарубежные покупки. В приложении выгодный обмен валют и авто-покупка по целевому курсу. Настроить обмен. 💱"
- "Руслан, у вас активность с валютными операциями. В приложении выгодный обмен и авто-покупка по целевому курсу. Настроить обмен."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Обмен валют", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 5: КРЕДИТ НАЛИЧНЫМИ (CASH LOAN)
# =============================================================================

CASH_LOAN_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для кредита наличными.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- monthly_inflow: {monthly_inflow} (месячные поступления в KZT)
- monthly_outflow: {monthly_outflow} (месячные расходы в KZT)
- loan_payments_count: {loan_payments_count} (количество платежей по кредитам)
- low_balance_days: {low_balance_days} (дни с низким остатком)
- cash_need_indicators: {cash_need_indicators} (индикаторы потребности в наличных)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Узнать лимит", "Оформить кредит", "Проверить условия"

СТРУКТУРА:
1. Персональный контекст (потребность в финансировании)
2. Польза/объяснение (быстрый доступ к деньгам)
3. Чёткий CTA

ШАБЛОН: "{name}, если нужен запас на крупные траты — можно оформить кредит наличными с гибкими выплатами. Узнать доступный лимит."

ПРИМЕРЫ:
- "Алия, если нужен запас на крупные траты — можно оформить кредит наличными с гибкими выплатами. Узнать доступный лимит."
- "Данияр, если планируете крупные покупки — кредит наличными даст быстрый доступ к финансированию. Узнать доступный лимит. 💰"
- "Тимур, если нужны дополнительные средства — можно оформить кредит наличными с удобными условиями погашения. Узнать лимит."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Кредит наличными", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 6: ДЕПОЗИТ МУЛЬТИВАЛЮТНЫЙ (MULTI-CURRENCY DEPOSIT)
# =============================================================================

MULTI_CURRENCY_DEPOSIT_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для мультивалютного депозита.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- free_balance: {free_balance} (свободный остаток в KZT)
- fx_activity_score: {fx_activity_score} (активность с валютой 1-10)
- foreign_spending: {foreign_spending} (траты за рубежом в KZT)
- deposit_fx_topup_count: {deposit_fx_topup_count} (пополнения валютного депозита)
- deposit_fx_withdraw_count: {deposit_fx_withdraw_count} (снятия с валютного депозита)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Открыть вклад", "Оформить депозит", "Подключить вклад"

СТРУКТУРА:
1. Персональный контекст (свободные средства и валютная активность)
2. Польза/объяснение (проценты и удобство)
3. Чёткий CTA

ШАБЛОН: "{name}, у вас остаются свободные средства. Разместите их на вкладе — удобно копить и получать вознаграждение. Открыть вклад."

ПРИМЕРЫ:
- "Алия, у вас остаются свободные средства. Разместите их на вкладе — удобно копить и получать вознаграждение. Открыть вклад."
- "Данияр, у вас стабильный остаток и активность с валютой. Мультивалютный депозит даст проценты и удобство хранения. Открыть вклад. 🌍"
- "Елена, у вас высокий остаток и зарубежные траты. Мультивалютный депозит поможет копить в разных валютах. Открыть вклад."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Депозит мультивалютный", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 7: ДЕПОЗИТ СБЕРЕГАТЕЛЬНЫЙ (SAVINGS DEPOSIT)
# =============================================================================

SAVINGS_DEPOSIT_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для сберегательного депозита.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- stable_balance: {stable_balance} (стабильный остаток в KZT)
- spending_volatility: {spending_volatility} (волатильность расходов 1-10)
- deposit_topup_count: {deposit_topup_count} (пополнения депозита)
- deposit_withdraw_count: {deposit_withdraw_count} (снятия с депозита)
- balance_stability_score: {balance_stability_score} (стабильность остатка 1-10)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Открыть вклад", "Оформить депозит", "Подключить вклад"

СТРУКТУРА:
1. Персональный контекст (свободные средства и валютная активность)
2. Польза/объяснение (проценты и удобство)
3. Чёткий CTA

ШАБЛОН: "{name}, у вас остаются свободные средства. Разместите их на вкладе — удобно копить и получать вознаграждение. Открыть вклад."

ПРИМЕРЫ:
- "Алия, у вас остаются свободные средства. Разместите их на вкладе — удобно копить и получать вознаграждение. Открыть вклад."
- "Руслан, у вас стабильный крупный остаток. Сберегательный депозит даст максимальную ставку за счёт отсутствия снятий. Открыть вклад. 🏦"
- "Мадина, у вас стабильные финансы. Сберегательный депозит поможет получить максимальный доход. Открыть вклад."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Депозит сберегательный", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 8: ДЕПОЗИТ НАКОПИТЕЛЬНЫЙ (ACCUMULATIVE DEPOSIT)
# =============================================================================

ACCUMULATIVE_DEPOSIT_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для накопительного депозита.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- regular_balance: {regular_balance} (регулярный остаток в KZT)
- periodic_topups: {periodic_topups} (периодические пополнения)
- topup_frequency: {topup_frequency} (частота пополнений в месяц)
- savings_behavior_score: {savings_behavior_score} (поведение накоплений 1-10)
- small_regular_amounts: {small_regular_amounts} (небольшие регулярные суммы)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Открыть вклад", "Оформить депозит", "Подключить вклад"

СТРУКТУРА:
1. Персональный контекст (свободные средства и валютная активность)
2. Польза/объяснение (проценты и удобство)
3. Чёткий CTA

ШАБЛОН: "{name}, у вас остаются свободные средства. Разместите их на вкладе — удобно копить и получать вознаграждение. Открыть вклад."

ПРИМЕРЫ:
- "Алия, у вас остаются свободные средства. Разместите их на вкладе — удобно копить и получать вознаграждение. Открыть вклад."
- "Сабина, у вас регулярные небольшие остатки. Накопительный депозит позволит копить с повышенной ставкой. Открыть вклад. 📈"
- "Тимур, вы регулярно откладываете небольшие суммы. Накопительный депозит поможет эффективно копить. Открыть вклад."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Депозит накопительный", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 9: ИНВЕСТИЦИИ (INVESTMENTS)
# =============================================================================

INVESTMENTS_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для инвестиций.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- available_funds: {available_funds} (свободные средства в KZT)
- invest_in_count: {invest_in_count} (вводы в инвестиции)
- invest_out_count: {invest_out_count} (выводы из инвестиций)
- investment_interest_score: {investment_interest_score} (интерес к инвестициям 1-10)
- risk_tolerance: {risk_tolerance} (толерантность к риску 1-10)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Открыть счёт", "Начать инвестировать", "Подключить инвестиции"

СТРУКТУРА:
1. Персональный контекст (свободные средства)
2. Польза/объяснение (низкий порог входа)
3. Чёткий CTA

ШАБЛОН: "{name}, попробуйте инвестиции с низким порогом входа и без комиссий на старт. Открыть счёт."

ПРИМЕРЫ:
- "Алия, попробуйте инвестиции с низким порогом входа и без комиссий на старт. Открыть счёт."
- "Данияр, у вас есть свободные средства. Инвестиции дадут возможность роста с низким порогом входа. Открыть счёт. 📊"
- "Елена, попробуйте инвестиции с нулевыми комиссиями на старт и низким порогом входа. Открыть счёт."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Инвестиции", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# PROMPT 10: ЗОЛОТЫЕ СЛИТКИ (GOLD BARS)
# =============================================================================

GOLD_BARS_PROMPT = """
Ты - эксперт по банковскому маркетингу. Создай персонализированное пуш-уведомление для золотых слитков.

ДАННЫЕ КЛИЕНТА:
- client_code: {client_code}
- name: {name}
- status: {status}
- age: {age}
- city: {city}
- avg_monthly_balance_KZT: {avg_monthly_balance_KZT}

ДОПОЛНИТЕЛЬНЫЕ ДАННЫЕ:
- high_liquidity: {high_liquidity} (высокая ликвидность средств)
- gold_buy_count: {gold_buy_count} (покупки золота)
- gold_sell_count: {gold_sell_count} (продажи золота)
- jewelry_spent: {jewelry_spent} (траты на ювелирку в KZT)
- value_preservation_interest: {value_preservation_interest} (интерес к сохранению стоимости 1-10)

ПРАВИЛА TOV:
{age_instructions}
{status_instructions}
- Обращение на "вы" с маленькой буквы
- На равных, просто и по-человечески, доброжелательно
- Важное в начало, без воды
- Длина 80-120 символов
- Без КАПС, максимум один восклицательный знак
- Числа: дробная часть запятая, разряды пробелы (2 490 ₸)
- CTA: "Купить золото", "Открыть счёт", "Подключить золото"

СТРУКТУРА:
1. Персональный контекст (ликвидность и интерес к ценностям)
2. Польза/объяснение (защитный актив)
3. Чёткий CTA

ШАБЛОН: "{name}, у вас высокая ликвидность средств. Золотые слитки — надёжный защитный актив. Купить золото."

ПРИМЕРЫ:
- "Алия, у вас высокая ликвидность средств. Золотые слитки — надёжный защитный актив. Купить золото."
- "Руслан, у вас высокий остаток и интерес к драгоценностям. Золотые слитки — надёжный способ сохранения стоимости. Купить золото. 🥇"
- "Мадина, у вас стабильные финансы и интерес к ценностям. Золотые слитки — защитный актив для диверсификации. Купить золото."

Верни ТОЛЬКО JSON в формате:
{{"client_code": {client_code}, "product": "Золотые слитки", "push_notification": "текст уведомления"}}
"""

# =============================================================================
# DICTIONARY OF ALL PROMPTS
# =============================================================================

BANKING_PROMPTS = {
    "Карта для путешествий": TRAVEL_CARD_PROMPT,
    "Премиальная карта": PREMIUM_CARD_PROMPT,
    "Кредитная карта": CREDIT_CARD_PROMPT,
    "Обмен валют": CURRENCY_EXCHANGE_PROMPT,
    "Кредит наличными": CASH_LOAN_PROMPT,
    "Депозит мультивалютный": MULTI_CURRENCY_DEPOSIT_PROMPT,
    "Депозит сберегательный": SAVINGS_DEPOSIT_PROMPT,
    "Депозит накопительный": ACCUMULATIVE_DEPOSIT_PROMPT,
    "Инвестиции": INVESTMENTS_PROMPT,
    "Золотые слитки": GOLD_BARS_PROMPT
}

# =============================================================================
# CORE FUNCTIONS
# =============================================================================

def get_prompt_for_product(product_name: str) -> str:
    """
    Get the appropriate prompt for a given banking product.
    
    Args:
        product_name: Name of the banking product
        
    Returns:
        Formatted prompt string ready for OpenAI API
    """
    if product_name not in BANKING_PROMPTS:
        raise ValueError(f"Unknown product: {product_name}. Available products: {list(BANKING_PROMPTS.keys())}")
    
    return BANKING_PROMPTS[product_name]

def format_prompt_with_data(prompt: str, **kwargs) -> str:
    """
    Format a prompt with client and product-specific data.
    Automatically adds age and status specific instructions.
    
    Args:
        prompt: The prompt template
        **kwargs: Client and product data (must include 'age' and 'status')
        
    Returns:
        Formatted prompt ready for OpenAI API
    """
    # Add dynamic instructions based on age and status
    kwargs['age_instructions'] = get_age_instructions(kwargs.get('age', 30))
    kwargs['status_instructions'] = get_status_instructions(kwargs.get('status', 'Стандартный клиент'))
    
    return prompt.format(**kwargs)

def get_available_products():
    """Get list of all available banking products"""
    return list(BANKING_PROMPTS.keys())
